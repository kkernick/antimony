<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Helper utilities for switching modes in SetUID applications."><title>user - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-80aa586b.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="user" data-themes="" data-resource-suffix="" data-rustdoc-version="1.94.0-nightly (4f14395c3 2025-12-22)" data-channel="nightly" data-search-js="search-9e2438ea.js" data-stringdex-js="stringdex-a3946164.js" data-settings-js="settings-c38705f0.js" ><script src="../static.files/storage-e2aeef58.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-3e30299d.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-ffcac47a.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Crate user</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../user/index.html">user</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#macros">Crate Items</a></h3><ul class="block"><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#statics" title="Statics">Statics</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>user</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/user/lib.rs.html#1-326">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Helper utilities for switching modes in SetUID applications.</p>
</div></details><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><dl class="item-table"><dt><a class="macro" href="macro.as_effective.html" title="macro user::as_effective">as_<wbr>effective</a></dt><dt><a class="macro" href="macro.as_real.html" title="macro user::as_real">as_real</a></dt><dt><a class="macro" href="macro.run_as.html" title="macro user::run_as">run_as</a></dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Error.html" title="struct user::Error">Error</a></dt><dd>An error when trying to change UID/GID.</dd><dt><a class="struct" href="struct.Sync.html" title="struct user::Sync">Sync</a></dt><dd>A synchronization primitive.
Only one thread will ever have a Sync object. When the Sync object
drops, control is relinquished to another thread.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.Mode.html" title="enum user::Mode">Mode</a></dt><dd>A SetUID mode.</dd></dl><h2 id="statics" class="section-header">Statics<a href="#statics" class="anchor">§</a></h2><dl class="item-table"><dt><a class="static" href="static.GROUP.html" title="static user::GROUP">GROUP</a></dt><dd>The Real, Effective, and Saved GID of the application.</dd><dt><a class="static" href="static.SETUID.html" title="static user::SETUID">SETUID</a></dt><dd>Whether the system is actually running under SetUid. If false, all functions here
are no-ops.</dd><dt><a class="static" href="static.USER.html" title="static user::USER">USER</a></dt><dd>The Real, Effective, and Saved UID of the application.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.current.html" title="fn user::current">current</a></dt><dd>Get the current user mode</dd><dt><a class="fn" href="fn.drop.html" title="fn user::drop">drop</a></dt><dd>Destructively change mode, preventing the process from returning.
This function will set Real, Effective, and Saved values to the
desired Mode. This prevents the process from changing their mode</dd><dt><a class="fn" href="fn.obtain_lock.html" title="fn user::obtain_lock">obtain_<wbr>lock</a></dt><dt><a class="fn" href="fn.restore.html" title="fn user::restore">restore</a></dt><dd>Restore a saved Uid/Gid combination
This function fails if the syscall does.</dd><dt><a class="fn" href="fn.revert.html" title="fn user::revert">revert</a></dt><dd>Revert the Mode to the original.
This function returns to the values of <code>USER</code> and <code>GROUP</code>.
This function can fail if the underlying syscall does.</dd><dt><a class="fn" href="fn.set.html" title="fn user::set">set</a></dt><dd>Set the Mode.
This function can never be misused to lock out the process
from returning to the original, or any other mode.
This function returns an error if the mode could not be
changed. Otherwise, it returns the old mode for use in
<code>restore()</code></dd></dl></section></div></main></body></html>